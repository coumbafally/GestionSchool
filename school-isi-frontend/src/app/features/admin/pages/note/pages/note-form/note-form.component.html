<aside class="sidebar">
  <div class="profile">
    <div class="avatar"></div>
    <h2 id="ti">ISI SCHOOL</h2>
 
  </div>
  <nav class="nav flex-column">
    <a class="nav-link " routerLink="/admin/dashboard"><i class="bi bi-house-door"></i> Tableau de bord</a>
    <a class="nav-link" routerLink="/admin/enseignants"><i class="bi bi-person-badge"></i> Enseignants</a>
    <a class="nav-link " routerLink="/admin/eleve"><i class="bi bi-people-fill"></i> Élèves</a>
    <a class="nav-link active" routerLink="/admin/matieres"><i class="bi bi-journal-bookmark"></i> Matières</a>
    <a class="nav-link" routerLink="/admin/classes"><i class="bi bi-building"></i> Classes</a>
    <a class="nav-link " routerLink="/admin/affectations"><i class="bi bi-building"></i> Affectations</a>
    <a class="nav-link" routerLink="/admin/tuteurs"><i class="bi bi-building"></i> tuteurs</a>
    <a class="nav-link" routerLink="/admin/notes"><i class="bi bi-clipboard-data"></i> Notes</a>
    <a class="nav-link" routerLink="/admin/login"><i class="bi bi-clipboard-data"></i> Deconnexion</a>
  </nav>
</aside>


<main class="main-content">
  <div *ngIf="eleves.length > 0">
    <div class="alert alert-info">
      Classe sélectionnée : {{ eleves[0]?.classe?.nom }} ({{ eleves[0]?.classe?.niveau }})
    </div>
  </div>

  <form (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Élève</label>
        <select class="form-select" [(ngModel)]="note.eleve_id" name="eleve_id" required>
          <option *ngFor="let e of eleves" [value]="e.id">{{ e.user?.prenom }} {{ e.user?.nom }}</option>
        </select>
      </div>

      <div class="col-md-6 mb-3">
        <label>Matière / Classe / Enseignant</label>
        <select class="form-select" [(ngModel)]="note.mce_id" name="mce_id" required>
          <option *ngFor="let m of mces" [value]="m.id">
            {{ m.matiere.nom }} - {{ m.classe.nom }} ({{ m.enseignant.user.prenom }} {{ m.enseignant.user.nom }})
          </option>
        </select>
      </div>

      <div class="col-md-4 mb-3">
        <label>Type</label>
        <select class="form-select" [(ngModel)]="note.type" name="type">
          <option value="Devoir">Devoir</option>
          <option value="Examen">Examen</option>
        </select>
      </div>

      <div class="col-md-4 mb-3">
        <label>Note</label>
        <input class="form-control" type="number" step="0.01" [(ngModel)]="note.note" name="note" required />
      </div>

      <div class="col-md-4 mb-3">
        <label>Coefficient</label>
        <input class="form-control" type="number" step="0.1" [(ngModel)]="note.coefficient" name="coefficient" required />
      </div>

      <div class="col-md-6 mb-3">
        <label>Période</label>
        <select class="form-select" [(ngModel)]="note.periode" name="periode" required>
          <option value="semestre 1">Semestre 1</option>
          <option value="semestre 2">Semestre 2</option>
        </select>
      </div>

      <div class="col-md-6 mb-3">
        <label>Appréciation</label>
        <textarea class="form-control" [(ngModel)]="note.appreciation" name="appreciation"></textarea>
      </div>
    </div>

    <button class="btn btn-success" type="submit">{{ isEditMode ? 'Mettre à jour' : 'Enregistrer' }}</button>
  </form>
</main>
